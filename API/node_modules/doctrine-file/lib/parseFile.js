'use strict';

exports.__esModule = true;

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _Extractor = require('./Extractor');

var _Extractor2 = _interopRequireDefault(_Extractor);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable no-param-reassign */
exports.default = function (file, options, callback) {
    if (!callback && typeof options === 'function') {
        callback = options;
        options = null;
    }

    var collected = [];
    _fs2.default.createReadStream(file, { encoding: 'utf8' }).on('error', callback).pipe(new _Extractor2.default(options)).on('error', callback).on('data', function (data) {
        return collected.push(data);
    }).on('finish', function () {
        return callback(null, collected);
    });
};